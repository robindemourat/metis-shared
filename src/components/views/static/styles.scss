/* cyrillic */
@font-face
{
    font-family: 'Oswald';
    font-weight: 200;
    font-style: normal;

    src: local('Oswald ExtraLight'), local('Oswald-ExtraLight'), url(https://fonts.gstatic.com/s/oswald/v16/Svfm3D5QBEfoZ_ZQasqgUoX0hVgzZQUfRDuZrPvH3D8.woff2) format('woff2');
    unicode-range: U+0400-045F,
    U+0490-0491,
    U+04B0-04B1,
    U+2116;
}
/* vietnamese */
@font-face
{
    font-family: 'Oswald';
    font-weight: 200;
    font-style: normal;

    src: local('Oswald ExtraLight'), local('Oswald-ExtraLight'), url(https://fonts.gstatic.com/s/oswald/v16/s6Iy20priLS4loU5HhjUs4X0hVgzZQUfRDuZrPvH3D8.woff2) format('woff2');
    unicode-range: U+0102-0103,
    U+0110-0111,
    U+1EA0-1EF9,
    U+20AB;
}
/* latin-ext */
@font-face
{
    font-family: 'Oswald';
    font-weight: 200;
    font-style: normal;

    src: local('Oswald ExtraLight'), local('Oswald-ExtraLight'), url(https://fonts.gstatic.com/s/oswald/v16/GwZ_PiN1Aind9Eyjp868E4X0hVgzZQUfRDuZrPvH3D8.woff2) format('woff2');
    unicode-range: U+0100-024F,
    U+0259,
    U+1E00-1EFF,
    U+20A0-20AB,
    U+20AD-20CF,
    U+2C60-2C7F,
    U+A720-A7FF;
}
/* latin */
@font-face
{
    font-family: 'Oswald';
    font-weight: 200;
    font-style: normal;

    src: local('Oswald ExtraLight'), local('Oswald-ExtraLight'), url(https://fonts.gstatic.com/s/oswald/v16/gov12z69psR1Uu7UJEfiUpBw1xU1rKptJj_0jans920.woff2) format('woff2');
    unicode-range: U+0000-00FF,
    U+0131,
    U+0152-0153,
    U+02BB-02BC,
    U+02C6,
    U+02DA,
    U+02DC,
    U+2000-206F,
    U+2074,
    U+20AC,
    U+2122,
    U+2212,
    U+2215;
}
/* cyrillic */
@font-face
{
    font-family: 'Oswald';
    font-weight: 400;
    font-style: normal;

    src: local('Oswald Regular'), local('Oswald-Regular'), url(https://fonts.gstatic.com/s/oswald/v16/C6GGSmqIX4ribdvhAcF3zX-_kf6ByYO6CLYdB4HQE-Y.woff2) format('woff2');
    unicode-range: U+0400-045F,
    U+0490-0491,
    U+04B0-04B1,
    U+2116;
}
/* vietnamese */
@font-face
{
    font-family: 'Oswald';
    font-weight: 400;
    font-style: normal;

    src: local('Oswald Regular'), local('Oswald-Regular'), url(https://fonts.gstatic.com/s/oswald/v16/Z47oc0BtjIgiXLu7VsCGjX-_kf6ByYO6CLYdB4HQE-Y.woff2) format('woff2');
    unicode-range: U+0102-0103,
    U+0110-0111,
    U+1EA0-1EF9,
    U+20AB;
}
/* latin-ext */
@font-face
{
    font-family: 'Oswald';
    font-weight: 400;
    font-style: normal;

    src: local('Oswald Regular'), local('Oswald-Regular'), url(https://fonts.gstatic.com/s/oswald/v16/Qw6_9HvXRQGg5mMbFR3Phn-_kf6ByYO6CLYdB4HQE-Y.woff2) format('woff2');
    unicode-range: U+0100-024F,
    U+0259,
    U+1E00-1EFF,
    U+20A0-20AB,
    U+20AD-20CF,
    U+2C60-2C7F,
    U+A720-A7FF;
}
/* latin */
@font-face
{
    font-family: 'Oswald';
    font-weight: 400;
    font-style: normal;

    src: local('Oswald Regular'), local('Oswald-Regular'), url(https://fonts.gstatic.com/s/oswald/v16/_P8jt3Y65hJ9c4AzRE0V1OvvDin1pK8aKteLpeZ5c0A.woff2) format('woff2');
    unicode-range: U+0000-00FF,
    U+0131,
    U+0152-0153,
    U+02BB-02BC,
    U+02C6,
    U+02DA,
    U+02DC,
    U+2000-206F,
    U+2074,
    U+20AC,
    U+2122,
    U+2212,
    U+2215;
}
/* cyrillic */
@font-face
{
    font-family: 'Oswald';
    font-weight: 700;
    font-style: normal;

    src: local('Oswald Bold'), local('Oswald-Bold'), url(https://fonts.gstatic.com/s/oswald/v16/smkSb2csQFrK-wxLDSe5R4X0hVgzZQUfRDuZrPvH3D8.woff2) format('woff2');
    unicode-range: U+0400-045F,
    U+0490-0491,
    U+04B0-04B1,
    U+2116;
}
/* vietnamese */
@font-face
{
    font-family: 'Oswald';
    font-weight: 700;
    font-style: normal;

    src: local('Oswald Bold'), local('Oswald-Bold'), url(https://fonts.gstatic.com/s/oswald/v16/69aXBpgQONjr_rHWADjBuYX0hVgzZQUfRDuZrPvH3D8.woff2) format('woff2');
    unicode-range: U+0102-0103,
    U+0110-0111,
    U+1EA0-1EF9,
    U+20AB;
}
/* latin-ext */
@font-face
{
    font-family: 'Oswald';
    font-weight: 700;
    font-style: normal;

    src: local('Oswald Bold'), local('Oswald-Bold'), url(https://fonts.gstatic.com/s/oswald/v16/dI-qzxlKVQA6TUC5RKSb34X0hVgzZQUfRDuZrPvH3D8.woff2) format('woff2');
    unicode-range: U+0100-024F,
    U+0259,
    U+1E00-1EFF,
    U+20A0-20AB,
    U+20AD-20CF,
    U+2C60-2C7F,
    U+A720-A7FF;
}
/* latin */
@font-face
{
    font-family: 'Oswald';
    font-weight: 700;
    font-style: normal;

    src: local('Oswald Bold'), local('Oswald-Bold'), url(https://fonts.gstatic.com/s/oswald/v16/bH7276GfdCjMjApa_dkG6ZBw1xU1rKptJj_0jans920.woff2) format('woff2');
    unicode-range: U+0000-00FF,
    U+0131,
    U+0152-0153,
    U+02BB-02BC,
    U+02C6,
    U+02DA,
    U+02DC,
    U+2000-206F,
    U+2074,
    U+20AC,
    U+2122,
    U+2212,
    U+2215;
}

/* cyrillic-ext */
@font-face
{
    font-family: 'Merriweather';
    font-weight: 400;
    font-style: normal;

    src: local('Merriweather Regular'), local('Merriweather-Regular'), url(https://fonts.gstatic.com/s/merriweather/v19/RFda8w1V0eDZheqfcyQ4EA7aC6SjiAOpAWOKfJDfVRY.woff2) format('woff2');
    unicode-range: U+0460-052F,
    U+1C80-1C88,
    U+20B4,
    U+2DE0-2DFF,
    U+A640-A69F,
    U+FE2E-FE2F;
}
/* cyrillic */
@font-face
{
    font-family: 'Merriweather';
    font-weight: 400;
    font-style: normal;

    src: local('Merriweather Regular'), local('Merriweather-Regular'), url(https://fonts.gstatic.com/s/merriweather/v19/RFda8w1V0eDZheqfcyQ4EBdwxCXfZpKo5kWAx_74bHs.woff2) format('woff2');
    unicode-range: U+0400-045F,
    U+0490-0491,
    U+04B0-04B1,
    U+2116;
}
/* vietnamese */
@font-face
{
    font-family: 'Merriweather';
    font-weight: 400;
    font-style: normal;

    src: local('Merriweather Regular'), local('Merriweather-Regular'), url(https://fonts.gstatic.com/s/merriweather/v19/RFda8w1V0eDZheqfcyQ4EPgrLsWo7Jk1KvZser0olKY.woff2) format('woff2');
    unicode-range: U+0102-0103,
    U+0110-0111,
    U+1EA0-1EF9,
    U+20AB;
}
/* latin-ext */
@font-face
{
    font-family: 'Merriweather';
    font-weight: 400;
    font-style: normal;

    src: local('Merriweather Regular'), local('Merriweather-Regular'), url(https://fonts.gstatic.com/s/merriweather/v19/RFda8w1V0eDZheqfcyQ4EIjoYw3YTyktCCer_ilOlhE.woff2) format('woff2');
    unicode-range: U+0100-024F,
    U+0259,
    U+1E00-1EFF,
    U+20A0-20AB,
    U+20AD-20CF,
    U+2C60-2C7F,
    U+A720-A7FF;
}
/* latin */
@font-face
{
    font-family: 'Merriweather';
    font-weight: 400;
    font-style: normal;

    src: local('Merriweather Regular'), local('Merriweather-Regular'), url(https://fonts.gstatic.com/s/merriweather/v19/RFda8w1V0eDZheqfcyQ4EBampu5_7CjHW5spxoeN3Vs.woff2) format('woff2');
    unicode-range: U+0000-00FF,
    U+0131,
    U+0152-0153,
    U+02BB-02BC,
    U+02C6,
    U+02DA,
    U+02DC,
    U+2000-206F,
    U+2074,
    U+20AC,
    U+2122,
    U+2212,
    U+2215;
}
/* cyrillic-ext */
@font-face
{
    font-family: 'Merriweather';
    font-weight: 700;
    font-style: normal;

    src: local('Merriweather Bold'), local('Merriweather-Bold'), url(https://fonts.gstatic.com/s/merriweather/v19/ZvcMqxEwPfh2qDWBPxn6nlPfeBX0b_nUXzRxYCltCF0.woff2) format('woff2');
    unicode-range: U+0460-052F,
    U+1C80-1C88,
    U+20B4,
    U+2DE0-2DFF,
    U+A640-A69F,
    U+FE2E-FE2F;
}
/* cyrillic */
@font-face
{
    font-family: 'Merriweather';
    font-weight: 700;
    font-style: normal;

    src: local('Merriweather Bold'), local('Merriweather-Bold'), url(https://fonts.gstatic.com/s/merriweather/v19/ZvcMqxEwPfh2qDWBPxn6noS3435hDhFFCA6hA_HcfZQ.woff2) format('woff2');
    unicode-range: U+0400-045F,
    U+0490-0491,
    U+04B0-04B1,
    U+2116;
}
/* vietnamese */
@font-face
{
    font-family: 'Merriweather';
    font-weight: 700;
    font-style: normal;

    src: local('Merriweather Bold'), local('Merriweather-Bold'), url(https://fonts.gstatic.com/s/merriweather/v19/ZvcMqxEwPfh2qDWBPxn6nhWzg2zaPmhUBtv9M77358I.woff2) format('woff2');
    unicode-range: U+0102-0103,
    U+0110-0111,
    U+1EA0-1EF9,
    U+20AB;
}
/* latin-ext */
@font-face
{
    font-family: 'Merriweather';
    font-weight: 700;
    font-style: normal;

    src: local('Merriweather Bold'), local('Merriweather-Bold'), url(https://fonts.gstatic.com/s/merriweather/v19/ZvcMqxEwPfh2qDWBPxn6nkqWMeizceScn2Xpn1ZpsKI.woff2) format('woff2');
    unicode-range: U+0100-024F,
    U+0259,
    U+1E00-1EFF,
    U+20A0-20AB,
    U+20AD-20CF,
    U+2C60-2C7F,
    U+A720-A7FF;
}
/* latin */
@font-face
{
    font-family: 'Merriweather';
    font-weight: 700;
    font-style: normal;

    src: local('Merriweather Bold'), local('Merriweather-Bold'), url(https://fonts.gstatic.com/s/merriweather/v19/ZvcMqxEwPfh2qDWBPxn6nshHwsiXhsDb0smKjAA7Bek.woff2) format('woff2');
    unicode-range: U+0000-00FF,
    U+0131,
    U+0152-0153,
    U+02BB-02BC,
    U+02C6,
    U+02DA,
    U+02DC,
    U+2000-206F,
    U+2074,
    U+20AC,
    U+2122,
    U+2212,
    U+2215;
}

.metis-StaticMontageSection
{
    font-family: Merriweather, serif;

    hyphens: none;

    $dimension-navwidth-default: 20%;
    $gutter-small: .5rem;
    $font-size-0: .5rem;
    $font-size-1: .7rem;
    $font-size-2: $font-size-1 * 1.1;
    $font-size-3: $font-size-2 * 1.1;
    $font-size-4: $font-size-3 * 1.1;
    $font-size-5: $font-size-4 * 1.1;
    $font-size-6: $font-size-5 * 1.1;
    $font-size-7: $font-size-6 * 1.1;
    $font-size-8: $font-size-7 * 1.1;
    $font-size-9: $font-size-8 * 1.1;
    $font-size-10: $font-size-9 * 1.1;
    $font-size-11: $font-size-10 * 1.3;
    $font-size-12: $font-size-11 * 1.3;
    $gutter-medium: $gutter-small * 1.6;
    text-rendering: optimizeLegibility;

    p,
    li,
    blockquote
    {
        font-size: $font-size-2;
        line-height: $font-size-2 * 1.8;

        text-align: justify;
    }

    blockquote{
      padding: $gutter-medium;
      color: white;
      background: darkgrey;
      margin: 0;
    }

    sup{
      margin: 0;
      padding: 0;
      vertical-align: super;
      line-height: 0;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6
    {
        color: inherit;
        // font-family: Oswald, sans-serif;

        page-break-inside: avoid;
    }

    h6
    {
        font-size: $font-size-3;
    }

    h5
    {
        font-size: $font-size-4;
    }
    h4
    {
        font-size: $font-size-5;
    }
    h3
    {
        font-size: $font-size-6;
    }
    h2
    {
        font-size: $font-size-7;
    }
    h1
    {
        font-size: $font-size-8;
    }

    .montage-title{
      font-size: $font-size-12;
      string-set: book-title content();
    }

    .montage-subtitle{
      font-size: $font-size-11;
    }

    .composition-subtitle
    {
        font-size: $font-size-9;
    }
    .composition-title
    {
      string-set: section-title content();
        font-size: $font-size-10;
    }

    .creators
    {
        font-size: $font-size-3;
        font-style: italic;
    }

    a, a:visited, a:active{
      text-decoration: none;
      color: inherit;
    }


    img
    {
        max-width: 100%;
        max-height: 100%;
    }

    figure
    {
        margin: 0;
        padding: $gutter-small;

        background: rgba(0,0,0,.05);

        page-break-inside: avoid;
        table
        {
            font-family: 'Oswald', sans-serif;
            font-size: $font-size-0;

            background: white;
            tr:nth-child(even)
            {
                background-color: #f2f2f2;
            }
            tr,
            th
            {
                text-align: left;
            }
            tbody
            {
                th
                {
                    font-weight: 200;
                }
            }
        }
    }
    figcaption
    {
        font-size: $font-size-1;
        h4
        {
            font-size: $font-size-2;
        }
    }

    .break-before,
    &.break-before
    {
        page-break-before: always;
    }

    .break-after,
    &.break-after
    {
        page-break-after: always;
    }

    .no-break-inside,
    &.no-break-inside
    {
        page-break-inside: avoid;
    }

    .empty-page
    {
        min-height: 10rem;

        page-break-after: always;
        page: emptypage;
    }

    .metis-PdfNotePointerPointer,
    .metis-EpubNotePointerPointer,
    .metis-PdfNoteContentPointer,
    .metis-EpubNoteContentPointer,
    .metis-PdfNotePointerPointer a,
    .metis-EpubNotePointerPointer a,
    .metis-PdfNoteContentPointer a,
    .metis-EpubNoteContentPointer a
    {
        text-decoration: none;

        color: inherit;
    }

    .metis-PdfNotePointerPointer,
    .metis-EpubNotePointerPointer
    {
        padding-top: $gutter-small;
        padding-right: $gutter-small;
    }


    .index-container
    {
        margin: 0;
        padding: 0;
    }

    .index-item
    {
        margin: 0;
        margin-bottom: $gutter-medium;

        list-style: none;
    }

    .index-link:after{
      font-weight: 200;
      text-decoration: none;
      color: inherit;
      // content: leader('.') target-content(attr(href));
      content: leader('.') target-counter(attr(href), page);
    }


    .notes-wrapper
    {
        padding: 0;
        margin: 0;
    }
    .note-wrapper
    {
        margin: 0;
        margin-bottom: $gutter-small;
        padding: 0;

        list-style: none;
        .note-content
        {
            display: flex;

            justify-content: stretch;
            flex-flow: row nowrap;
            margin: 0;
            font-size: $font-size-1;
            padding: 0;

            .metis-NotePointerPointer{
              // vertical-align: top;
              // padding: 0;
              // margin: 0;
              margin-top: $font-size-1/3;
            }
            
            .note-content-container
            {
                flex: 1;
                padding: 0;
                margin: 0;
                p,ul,li,blockquote{
                  margin: 0;
                  padding: 0;
                }
            }
        }
    }

    .bibliography-container
    {
        .csl-entry
        {
            margin-bottom: $gutter-small;
            font-size: $font-size-1;
        }
    }

    .table-of-contents
    {
        ul
        {
            padding: 0;
            li
            {
                margin: 0;
                padding: 0;

                list-style: none;
            }
        }

        a
        {
            text-decoration: underline;
        }
    }



    &.cover,
    &.back-cover
    {
        font-family: 'Oswald', sans-serif;

        position: absolute;
        top: 0;
        left: 0;
        // min-height: 40rem;
        // position: relative;

        width: 100%;
        height: 100%;

        page: cover;

        @media screen
        {
            position: relative;

            display: block;
            overflow: hidden;

            height: 30rem;
            max-height: 30rem;
            min-height: 30rem;
            padding-top: 50%;
        }

        .content
        {
            position: absolute;
            top: 0;
            left: 0;

            width: 100%;
            height: 100%;
            padding: 1rem;
        }
    }

    &.cover
    {
        page: cover;
        .content{
          padding-top: 50%;
          margin-left: 1rem;
          margin-right: 1rem;
          text-align: center;
        }
    }

    &.colophon{
      page: colophon;
    }

    &.back-cover
    {
        page: back-cover;
    }

    .backcover-title{
      font-size: $font-size-12;
      margin-bottom: $gutter-medium;
      padding: 3rem;
    }
    .backcover-abstract{
      font-family: Merriweather, serif;
      font-size: $font-size-5;
      width: 100%;
      text-align: left;
      padding: 3rem;
    }
}

@page
{
    padding: 1.5cm;
    padding-top: 1cm;

    size: A4;

    marks: crop cross;
    prince-bleed: 0.25in;
    prince-trim: 0.25in;

    prince-mark-length: 1cm;
    font-variant: prince-opentype(dlig, liga);

    @bottom
    {
        content: counter(page);
        font-family: Merriweather, serif;
        font-size: .6rem;
        color: darkgrey;
    }
}

@page:left
{
    padding-right: 3cm;
    @top
    {
        content: string(book-title);
        font-family: Merriweather, serif;
        font-size: .6rem;
        color: darkgrey;
    }
}

@page:right
{
    padding-left: 3cm;
    @top
    {
        content: string(section-title);
        font-family: Merriweather, serif;
        font-size: .6rem;
        color: darkgrey;
    }
}

@page cover
{
    margin: 0;
    padding: 0;

    page-break-after: always;
    @top
    {
        content: none;
    }
    @bottom
    {
        content: none;
    }
}

@page back-cover
{
    margin: 0;
    padding: 0;

    page-break-before: always;
    @top
    {
        content: none;
    }
    @bottom
    {
        content: none;
    }
}


@page emptypage
{
    @top
    {
        content: none;
    }
    @bottom
    {
        content: none;
    }
}

@page colophon
{
    @top
    {
        content: none;
    }
    @bottom
    {
        content: none;
    }
}

@page:blank {
    @top-left {
        content: normal;
    }
    @top-right {
        content: normal;
    }
}
